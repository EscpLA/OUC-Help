(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/edit/edit"],{"70d8":function(e,t,n){"use strict";n.r(t);var r=n("ceff"),u=n("ed32");for(var a in u)"default"!==a&&function(e){n.d(t,e,(function(){return u[e]}))}(a);n("82f0");var o,i=n("f0c5"),s=Object(i["a"])(u["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);t["default"]=s.exports},"7e02":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("a34a")),u=(a(n("1057")),n("26cb"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,u,a,o){try{var i=e[a](o),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(r,u)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var a=e.apply(t,n);function i(e){o(a,r,u,i,s,"next",e)}function s(e){o(a,r,u,i,s,"throw",e)}i(void 0)}))}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={data:function(){return{query:{},tips:"请输入真实姓名噢~",oldVal:"",newVal:"",type:"center",msgType:"success",messageText:"这是一条成功提示",value:""}},computed:c({},(0,u.mapState)("m_user",["userInfo","stuInfo","token"])),methods:c(c({},(0,u.mapMutations)("m_user",["updateUserinfo","updateStuInfo"])),{},{editSave:function(){var t=this;return i(r.default.mark((function n(){var u,a,o,i,s,c;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.oldVal==t.newVal?console.log("无需更改"):"nickName"==t.query.type?(t.stuInfo.name=t.newVal,t.updateUserinfo(t.stuInfo)):(t.stuInfo[t.query.type]=t.newVal,t.updateStuInfo(t.stuInfo)),u=-1,a="",n.t0=t.query.type,n.next="nickName"===n.t0?6:"stuNum"===n.t0?9:"tele"===n.t0?12:15;break;case 6:return u=2,a="name",n.abrupt("break",16);case 9:return u=3,a="student_number",n.abrupt("break",16);case 12:return u=6,a="phone",n.abrupt("break",16);case 15:return n.abrupt("break",16);case 16:return o={},o["openid"]=t.token,o["type"]=u,o[a]=t.newVal,console.log("myQuery: ",o),n.next=23,e.$http.post("/ChangeInfo/",o);case 23:if(i=n.sent,s=i.data,console.log("res: ",s),200==s.code){n.next=28;break}return n.abrupt("return",e.$showMsg("修改失败，请稍后再试",1500,"erroe"));case 28:e.$showMsg("修改成功！",1500,"success"),c=t.stuInfo,c[a]=t.newVal,t.updateStuInfo(c),setTimeout((function(){e.navigateBack()}),1500);case 33:case"end":return n.stop()}}),n)})))()},messageToggle:function(e){this.msgType=e,this.messageText="修改成功！",this.$refs.message.open()}}),onLoad:function(t){switch(this.query=t,this.query.type){case"nickName":this.oldVal=this.stuInfo.name,this.tips="请设置2-24个字符，不包括@<>/等无效字符哦",e.setNavigationBarTitle({title:"编辑昵称"});break;case"stuNum":this.oldVal=this.stuInfo.student_number,this.tips="请输入真实学号噢~",e.setNavigationBarTitle({title:"编辑学号"});break;case"grade":this.oldVal=this.stuInfo.grade,this.tips="请输入真实年级噢~",e.setNavigationBarTitle({title:"编辑年级"});break;case"major":this.oldVal=this.stuInfo.major,this.tips="请输入真实专业噢~",e.setNavigationBarTitle({title:"编辑专业"});break;case"tele":this.oldVal=this.stuInfo.tele,this.tips="请输入真实电话噢~",e.setNavigationBarTitle({title:"编辑电话"});break;default:break}this.newVal=this.oldVal},onReady:function(){}};t.default=f}).call(this,n("543d")["default"])},"82f0":function(e,t,n){"use strict";var r=n("cd8f"),u=n.n(r);u.a},"8f00":function(e,t,n){"use strict";(function(e){n("6e5e");r(n("66fd"));var t=r(n("70d8"));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},cd8f:function(e,t,n){},ceff:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var r={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"072f"))},uniPopupMessage:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-popup/components/uni-popup-message/uni-popup-message")]).then(n.bind(null,"671d"))}},u=function(){var e=this,t=e.$createElement;e._self._c},a=[]},ed32:function(e,t,n){"use strict";n.r(t);var r=n("7e02"),u=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=u.a}},[["8f00","common/runtime","common/vendor"]]]);