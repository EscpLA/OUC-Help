{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/subpkg/me-comments/me-comments.vue?5a89","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/subpkg/me-comments/me-comments.vue?6067","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/subpkg/me-comments/me-comments.vue?3c2e","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/subpkg/me-comments/me-comments.vue?18cf","uni-app:///subpkg/me-comments/me-comments.vue","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/subpkg/me-comments/me-comments.vue?2c82"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"4IAAA,KAGA,YACA,Y,mDAFAA,GAAGC,kCAAoCC,EAGvCC,EAAWC,a,gECLX,yHACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,qCACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,8GAA4vB,eAAG,G,+HC2B/vB,GANA,SAMA,O,qlEAGA,CACE,KADF,WAEI,MAAJ,CAEM,QAAN,EAEM,SAAN,GAEM,WAAN,GAEM,SAAN,EACM,WAAN,GAIM,KAAN,EACM,SAAN,EACM,MAAN,EACM,eAAN,IAGE,SAAF,QACE,EAAF,iCADA,IAGI,SAHJ,WAKM,GAAN,oCACQ,OAAR,YAEU,OAAV,0BAME,QAAF,CACI,SADJ,SACA,GAEA,kBACQ,KAAR,UAEQ,KAAR,4DAEQ,KAAR,8CAEQ,KAAR,OACQ,KAAR,gBAKI,YAhBJ,SAgBA,oJAIA,2BACA,eACA,YACA,sBAPA,mBAGA,EAHA,EAGA,KAMA,YATA,yCAUA,mCAVA,OAYA,0BACA,8BACA,SAGA,aAEA,sBACA,IApBA,gDAyBE,WAAF,CAGI,oBAAJ,EACI,mBAAJ,GAEE,OAlFF,WAoFI,KAAJ,4DACI,KAAJ,8CACI,KAAJ,WACI,KAAJ,eAGE,cA1FF,WA0FA,uIAGA,mDAHA,yCAIA,GAJA,cAOA,gBACA,mBARA,SAYA,2BACA,eACA,YACA,sBAfA,mBAWA,EAXA,EAWA,KAMA,YAjBA,0CAkBA,mCAlBA,QAoBA,0BACA,4DACA,SACA,mBACA,gBAxBA,+CA4BE,kBAtHF,WAuHI,KAAJ,OAEI,KAAJ,wBACM,EAAN,2B,2ECxJA,8GAAm5C,eAAG,G","file":"subpkg/me-comments/me-comments.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/me-comments/me-comments.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./me-comments.vue?vue&type=template&id=621990e4&\"\nvar renderjs\nimport script from \"./me-comments.vue?vue&type=script&lang=js&\"\nexport * from \"./me-comments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./me-comments.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/me-comments/me-comments.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me-comments.vue?vue&type=template&id=621990e4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me-comments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me-comments.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <view class=\"switchBox\">\r\n      <view :class=\"['case1', curCase == 1? 'curCase' :'']\" @click=\"goToCase(1)\">\r\n        收到的评论和@\r\n      </view>\r\n      <view :class=\"['case2', curCase == 2? 'curCase' :'']\" @click=\"goToCase(2)\">\r\n        我发出的\r\n      </view>\r\n    </view>\r\n    <!-- 展示我的评论，包括 收到的评论和发布的评论 -->\r\n    <!--   <meReceivedComments v-if=\"curCase==1\"></meReceivedComments>\r\n    <meSendComments v-else></meSendComments> -->\r\n    <meCommentsSkeleton v-if=\"loading == true\"></meCommentsSkeleton>\r\n    <meCommentsComponent v-else-if=\"curCase==1\" :comments=\"Mycomments\" :info=\"infoText\" :curCase=\"1\">\r\n    </meCommentsComponent>\r\n    <meCommentsComponent v-else :comments=\"Mycomments\" :info=\"infoText\" :curCase=\"2\"></meCommentsComponent>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import store from '../../store/module/user.js'\r\n  // 我收到的评论\r\n  // import meReceivedComments from '../../components/me-received-comments/me-received-comments.vue'\r\n  // import meSendComments from '../../components/me-send-comments/me-send-comments.vue'\r\n  import meCommentsComponent from '@/components/me-comments-component/me-comments-component.vue'\r\n  import meCommentsSkeleton from '@/components/me-comments-skeleton/me-comments-skeleton.vue'\r\n  import {\r\n    mapState\r\n  } from 'vuex'\r\n  export default {\r\n    data() {\r\n      return {\r\n        // 表示当前页面展示的是 case1 还是 case2\r\n        curCase: 1,\r\n        // 表示提示信息\r\n        infoText: '',\r\n        // 请求的url，根据 curCase 而定\r\n        requestUrl: '',\r\n        // 正在加载数据，显示骨架屏\r\n        loading: true,\r\n        Mycomments: [],\r\n\r\n        // 分页请求数据\r\n        // 要请求哪一页（下一页）\r\n        page: 1,\r\n        pageSize: 6,\r\n        total: 0,\r\n        bottomLoading: false,\r\n      };\r\n    },\r\n    computed: {\r\n      ...mapState('m_user', ['token']),\r\n      // 评论的发布时间\r\n      postTime() {\r\n        // console.log('postTime');\r\n        if (JSON.stringify(this.comments) != '[]') {\r\n          return ((time) => {\r\n            // console.log('time: ', time)\r\n            return tools.utcToBeijing(time)\r\n          })\r\n        }\r\n      },\r\n    },\r\n\r\n    methods: {\r\n      goToCase(index) {\r\n        // 如果需要切换，就切换。\r\n        if (index != this.curCase) {\r\n          this.curCase = index;\r\n          // 修改 requesUrl\r\n          this.requestUrl = this.curCase == 1 ? '/ReceiveComment/' : '/MyComment/'\r\n          // 修改提示语句\r\n          this.infoText = this.curCase == 1 ? '评论了你的帖子' : '评论了Ta的帖子';\r\n          // 将page置为1，重新请求\r\n          this.page = 1;\r\n          this.getComments();\r\n        }\r\n      },\r\n\r\n      // 获取评论\r\n      async getComments(cb) {\r\n        // console.log('this.token', this.token);\r\n        const {\r\n          data: res\r\n        } = await uni.$http.post(this.requestUrl, {\r\n          openid: this.token,\r\n          page: this.page,\r\n          pageSize: this.pageSize\r\n        })\r\n        if (res.code != 200) {\r\n          return uni.$showMsg('数据加载失败', 1500, 'error')\r\n        }\r\n        this.total = res.myComment.total;\r\n        this.Mycomments = res.myComment.list;\r\n        this.page++;\r\n\r\n\r\n        this.loading = false;\r\n        // 执行回调函数\r\n        if (typeof(cb) == 'function') {\r\n          cb();\r\n        }\r\n        // console.log('this.comments', this.comments);\r\n      },\r\n    },\r\n    components: {\r\n      // meReceivedComments,\r\n      // meSendComments,\r\n      meCommentsComponent,\r\n      meCommentsSkeleton\r\n    },\r\n    onLoad() {\r\n      // 修改请求 url\r\n      this.requestUrl = this.curCase == 1 ? '/ReceiveComment/' : '/MyComment/';\r\n      this.infoText = this.curCase == 1 ? '评论了你的帖子' : '评论了Ta的帖子';\r\n      this.loading = true;\r\n      this.getComments()\r\n    },\r\n    // 上拉触底\r\n    async onReachBottom() {\r\n      // 当 当前页码值*每页显示数据个数 >= 总数据个数，则下一页无数据\r\n      // 正在进行数据请求，也不再请求\r\n      if ((this.page - 1) * this.pageSize >= this.total || this.bottomLoading == true) {\r\n        return 0;\r\n      }\r\n      // 加载更多\r\n      uni.showLoading()\r\n      this.bottomLoading = true;\r\n\r\n      const {\r\n        data: res\r\n      } = await uni.$http.post(this.requestUrl, {\r\n        openid: this.token,\r\n        page: this.page,\r\n        pageSize: this.pageSize\r\n      })\r\n      if (res.code != 200) {\r\n        return uni.$showMsg('数据加载失败', 1500, 'error')\r\n      }\r\n      this.total = res.myComment.total;\r\n      this.Mycomments = [...this.Mycomments, ...res.myComment.list];\r\n      this.page++;\r\n      this.bottomLoading = false;\r\n      uni.hideLoading()\r\n\r\n    },\r\n\r\n    onPullDownRefresh() {\r\n      this.page = 1;\r\n      // curCase不变，重新请求数据即可\r\n      this.getComments(() => {\r\n        uni.stopPullDownRefresh()\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  .curCase {\r\n    color: #ee9529;\r\n    border-bottom: #ee9529 solid 3px;\r\n  }\r\n\r\n  .switchBox {\r\n    font-size: 40rpx;\r\n    color: #9a9a9a;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin: 20rpx auto;\r\n    margin-bottom: 40rpx;\r\n    width: 80%;\r\n    transision: all 0.5s;\r\n\r\n    .case1 {\r\n      // width: 60%;\r\n      text-align: center;\r\n      padding-bottom: 10rpx;\r\n      transition: color 0.5s;\r\n    }\r\n\r\n    .case2 {\r\n      // width: 39%;\r\n      text-align: center;\r\n      padding-bottom: 10rpx;\r\n      transition: color 0.5s;\r\n    }\r\n  }\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me-comments.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me-comments.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}