{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/pages/lost/lost.vue?b271","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/pages/lost/lost.vue?3880","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/pages/lost/lost.vue?635d","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/pages/lost/lost.vue?11be","uni-app:///pages/lost/lost.vue","webpack:///C:/Users/hp/Documents/HBuilderProjects/OUC_help/pages/lost/lost.vue?52a0"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","filterBar","uniCalendar","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l0","_self","_c","goodsList","length","__map","item","i","$orig","__get_orig","m0","itemTime","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":"4HAAA,KAGA,YACA,W,mDAFAA,GAAGC,kCAAoCC,EAGvCC,EAAWC,a,+DCLX,sHACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sBACZ,aAAAF,E,yCCvBf,sQ,gCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,UAAW,WACT,OAAO,8DAITC,YAAa,WACX,OAAO,kIAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GAEO,GAAxBN,EAAIO,UAAUC,OACVR,EAAIS,MAAMT,EAAIO,WAAW,SAASG,EAAMC,GACtC,IAAIC,EAAQZ,EAAIa,WAAWH,GAEvBI,EAAKd,EAAIe,SAASJ,GACtB,MAAO,CACLC,MAAOA,EACPE,GAAIA,MAGR,MACNd,EAAIgB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLhB,GAAIA,MAKRiB,GAAmB,EACnBC,EAAkB,GACtBvB,EAAOwB,eAAgB,G,gCC1DvB,6GAAqvB,eAAG,G,8HCwFxvB,GAFA,SAEA,UAEA,Q,+qEAIA,CACE,KADF,WAEI,MAAJ,CAIM,KAAN,EACM,SAAN,EACM,MAAN,EAGM,KAAN,EAGM,GAAN,EAEM,SAAN,GAIM,YAAN,EAEM,aAAN,EAGM,UAAN,GAGM,WAAN,EAEQ,KAAR,EACQ,MAAR,KAEQ,WAAR,EACU,KAAV,EACU,MAAV,OACQ,CACE,KAAV,EACU,MAAV,OACQ,CACE,KAAV,EACU,MAAV,cAIM,aAAN,EAGM,KAAN,KAGM,SAAN,EAGM,QAAN,GAEM,UAAN,GAGM,cAAN,EAEM,kBAAN,IAIE,SAAF,QACE,EAAF,mCADA,IAGI,SAHJ,WAGA,WACM,OAAN,YACQ,OAAR,+CAII,SAAJ,sBAEM,OAAN,YACQ,OAAR,4CAKE,QAAF,QAEE,EAAF,6CAFA,IAKI,UALJ,WAKA,iJAGA,wBAHA,gBAEA,EAFA,EAEA,KAEA,eAIA,wBARA,8CAaI,aAlBJ,SAkBA,8DAoCQ,EApCR,qHAoCA,gGACA,gCADA,wBAGA,sBAHA,SAMA,2BAEA,YACA,oCACA,oBACA,YACA,sBAZA,mBAKA,EALA,EAKA,KASA,YAdA,yCAeA,kCAfA,OAkBA,0BACA,6BACA,YApBA,iDApCA,yBAoCA,EApCA,2CAGA,6EACA,IACA,gCALA,gBAOA,0BAPA,wCAYA,2BAEA,YACA,oCACA,oBACA,YACA,sBAlBA,oBAWA,EAXA,EAWA,KAUA,YArBA,0CAsBA,kCAtBA,QAyBA,0BACA,6BACA,SAGA,sBACA,IA/BA,+CAgEI,gBAlFJ,WAkFA,4IAEA,SAGA,IAGA,EADA,4CACA,+BAEA,wDAGA,GACA,YACA,OACA,oBACA,YACA,qBAGA,gBACA,8BACA,4BAvBA,SA2BA,6BA3BA,mBA0BA,EA1BA,EA0BA,KAEA,YA5BA,0CA6BA,kCA7BA,QAgCA,0BACA,6BACA,SAlCA,+CAuCI,WAzHJ,WA0HM,EAAN,YACQ,IAAR,kCAII,gBA/HJ,SA+HA,GACM,KAAN,cACM,KAAN,eACM,KAAN,mBAEI,gBApIJ,SAoIA,GACM,KAAN,eAEM,KAAN,mBAII,aA3IJ,SA2IA,GACM,QAAN,WACM,KAAN,oBAEA,kBACQ,KAAR,kBACQ,KAAR,+BAGQ,KAAR,4BACQ,KAAR,6BACQ,KAAR,wBAKI,QA3JJ,SA2JA,GACM,KAAN,kBACM,KAAN,mBAKI,YAlKJ,WAkKA,2IAGA,kDAHA,yCAIA,GAJA,cAOA,gBACA,kBAEA,0DAEA,GACA,YACA,OACA,oBACA,YACA,qBAGA,gBACA,8BACA,4BAtBA,SA0BA,6BA1BA,mBAyBA,EAzBA,EAyBA,KAEA,YA3BA,0CA4BA,kCA5BA,WA8BA,YA9BA,0CA+BA,kCA/BA,QAkCA,0DACA,SACA,kBACA,gBArCA,iDAyCE,WAAF,CACI,SAAJ,EACI,SAAJ,EACI,UAAJ,GAIE,OApSF,SAoSA,GAKA,oCAGM,KAAN,YAII,KAAJ,eAGA,eACM,EAAN,YACQ,IAAR,6EACQ,UAIJ,IAAJ,wBAEI,KAAJ,qBACI,KAAJ,gCAII,IAAJ,mDACA,OACI,EAAJ,gCAEM,EAAN,wBACA,uBAIE,QA1UF,WA2UI,EAAJ,uBACM,WAAN,UACM,gBAAN,aAGE,OAhVF,aAiVE,OAjVF,WAkVI,KAAJ,6BAGE,kBArVF,WAuVI,KAAJ,cACI,KAAJ,eAEI,KAAJ,WACI,KAAJ,yBAEI,KAAJ,OAEI,KAAJ,yBACM,QAAN,cACM,EAAN,2B,0EC/bA,6GAA44C,eAAG,G","file":"pages/lost/lost.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/lost/lost.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./lost.vue?vue&type=template&id=2e2568f4&\"\nvar renderjs\nimport script from \"./lost.vue?vue&type=script&lang=js&\"\nexport * from \"./lost.vue?vue&type=script&lang=js&\"\nimport style0 from \"./lost.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/lost/lost.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./lost.vue?vue&type=template&id=2e2568f4&\"","var components\ntry {\n  components = {\n    filterBar: function() {\n      return import(\n        /* webpackChunkName: \"components/filterBar/filterBar\" */ \"@/components/filterBar/filterBar.vue\"\n      )\n    },\n    uniCalendar: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-calendar/components/uni-calendar/uni-calendar\" */ \"@/uni_modules/uni-calendar/components/uni-calendar/uni-calendar.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    _vm.goodsList.length != 0\n      ? _vm.__map(_vm.goodsList, function(item, i) {\n          var $orig = _vm.__get_orig(item)\n\n          var m0 = _vm.itemTime(i)\n          return {\n            $orig: $orig,\n            m0: m0\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./lost.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./lost.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"bg-white\">\r\n    <!-- 寻物 页面的帖子 -->\r\n    <view class=\"search-box\">\r\n      <mySearch @click=\"goToSearch\" ref=\"mySearch\"></mySearch>\r\n    </view>\r\n    <!-- 版心 -->\r\n    <view class=\"container\">\r\n      <!-- 导航栏 -->\r\n      <!-- <my-cateNav></my-cateNav> -->\r\n      <!-- 每个帖子的容器 -->\r\n      <view class=\"mid-content-container\">\r\n        <view class=\"left\">\r\n          <!-- 种类导航 -->\r\n          <scroll-view class=\"cat-container\" scroll-y :style=\"{height: wh+'px'}\">\r\n            <view class=\"cat-item\" v-for=\"(item,index1) in leftNav\" :key=\"index1\">\r\n              <!-- 一级导航 -->\r\n              <view\r\n                :class=\"['first-nav-item', index1== firstActive ? (index1 %2 == 0 ? 'firstActive even': 'firstActive odd') : '']\"\r\n                @click=\"firActiveChange(index1)\">\r\n                <!-- 动态添加 种类 iconfont -->\r\n                <view :class=\"['iconfont', 'icon-' + item.icon]\">\r\n                </view>\r\n                {{item.text}}\r\n              </view>\r\n              <!-- 二级导航 -->\r\n              <transition name=\"custom-classes-transition\" enter-active-class=\"animated animate__fadeIn\"\r\n                leave-active-class=\"animated animate__fadeInUp\">\r\n                <view\r\n                  :class=\"['second-nav-item', index2 == secondActive? (index1 % 2 == 0? 'secondActive even' : 'secondActive odd') :'']\"\r\n                  @click=\"secActiveChange(index2)\" v-for=\"(secondItem, index2) in item.children\"\r\n                  v-if=\"index1 == firstActive\" :key=\"index2\">\r\n                  {{secondItem.text}}\r\n                </view>\r\n\r\n              </transition>\r\n            </view>\r\n          </scroll-view>\r\n        </view>\r\n        <scroll-view class=\"right\" scroll-y :style=\"{height: wh+'px'}\" @scrolltolower=\"lowerBottom\">\r\n\r\n          <!-- 筛选栏 -->\r\n          <filterBar ref=\"filterBar\" :filterList=\"filterList\" :leftNavWidth=\"leftNavWidth\" :devWidth=\"fatherDeviceWidth\"\r\n            @syncSelectId=\"syncSelectId\">\r\n          </filterBar>\r\n\r\n          <view class=\"\" v-if=\"goodsList.length != 0\">\r\n            <navigator class=\"goods-container\" v-for=\"(item, i) in goodsList\"\r\n              :url=\"'/subpkg/goods_detail/goods_detail?detail_type=1&item_id=' + item.id\" :key=\"i\">\r\n              <!-- 物品信息 -->\r\n              <view class=\"goods-info\">\r\n                <image :src=\"item.picture_address\" mode=\"aspectFill\"></image>\r\n                <view class=\"goods-desc-box\">\r\n                  <!-- 物品描述 -->\r\n                  <view class=\"goods-desc\">\r\n                    {{item.depart_kindID__title + '-' +item.name}}\r\n                  </view>\r\n                  <!-- 物品时间 -->\r\n                  <view class=\"goods-data\">\r\n                    遗失时间：{{itemTime(i)}}\r\n                  </view>\r\n                  <!-- 物品地点 -->\r\n                  <view class=\"goods-loca\">\r\n                    遗失地点：{{item.position}}\r\n                  </view>\r\n                </view>\r\n              </view>\r\n            </navigator>\r\n\r\n          </view>\r\n          <uniEmpty v-else text=\"没有更多数据啦\" textColor=\"#000\"></uniEmpty>\r\n        </scroll-view>\r\n      </view>\r\n\r\n      <!-- uni-calendar -->\r\n      <view class=\"example-body\">\r\n        <uni-calendar ref=\"calendar\" :wh=\"'53'\" :insert=\"false\" :range=\"true\" @confirm=\"confirm\" :endDate=\"nowDate\" />\r\n      </view>\r\n\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import mySearch from '../../components/my-search/my-search.vue'\r\n  import filterBar from '@/components/filterBar/filterBar.vue'\r\n  import store from '../../store/module/user.js'\r\n  import uniEmpty from '../../uni_modules/uni-empty/components/o-empty/o-empty.vue'\r\n  import tools from '@/utils/tools.js'\r\n\r\n  import {\r\n    mapState,\r\n    mapMutations\r\n  } from 'vuex'\r\n  export default {\r\n    data() {\r\n      return {\r\n\r\n        // 分页请求数据\r\n        // 要请求哪一页（下一页）\r\n        page: 1,\r\n        pageSize: 6,\r\n        total: 0,\r\n\r\n        // 首页帖子类型，1 表示失物， 2 表示招领\r\n        type: 1,\r\n\r\n        // 屏幕可用高度 = 屏幕高度 - tabbar高度 - navigationbar 高度 - 搜索栏高度（53px）。\r\n        wh: 0,\r\n        // 请求左侧种类导航得到的种类数组（原始数据）\r\n        kindList: [],\r\n\r\n        // 导航栏的激活项\r\n        // 一级激活项\r\n        firstActive: 0,\r\n        // 二级激活项\r\n        secondActive: 0,\r\n\r\n        // 物品列表\r\n        goodsList: [],\r\n\r\n        // 筛选列表\r\n        filterList: [{\r\n          // 筛选类型，2表示按时间筛选\r\n          type: 2,\r\n          value: '时间',\r\n          // 点击显示的筛选项\r\n          secondList: [{\r\n            kind: 1,\r\n            value: '最新的'\r\n          }, {\r\n            kind: 2,\r\n            value: '最早的'\r\n          }, {\r\n            kind: 3,\r\n            value: '指定的时间区间'\r\n          }, ]\r\n        }],\r\n        // 左侧宽度\r\n        leftNavWidth: 0,\r\n\r\n        // 定时器，用于函数间传递定时器。\r\n        intv: null,\r\n\r\n        // 表示筛选类型，为空或=1：按最新排序 =2：按最早排序 =3：按指定日期最新排序，接收start, end参数\r\n        selectID: 1,\r\n\r\n        // 今日时间\r\n        nowDate: '',\r\n        // 用户选择的时间范围\r\n        dateRange: {},\r\n\r\n        // 上拉触底，正在进行网络请求\r\n        lowerLoading: false,\r\n\r\n        fatherDeviceWidth: 0,\r\n      };\r\n    },\r\n\r\n    computed: {\r\n      ...mapState('m_user', ['leftNav']),\r\n      // 帖子的发布时间\r\n      postTime() {\r\n        return index => {\r\n          return tools.utcToBeijing(this.posts[index].post_time)\r\n        }\r\n      },\r\n      // itemTime，物品的丢失或拾到时间\r\n      itemTime: function() {\r\n        // 由于实际需要，物品的时间只需要日期即可。\r\n        return index => {\r\n          return tools.itemTime(this.goodsList[index].time)\r\n          // return tools.utcToBeijing(this.goodsList[index].time).split(' ')[0].replace(/-/g, '/');\r\n        };\r\n      },\r\n    },\r\n    methods: {\r\n\r\n      ...mapMutations('m_user', ['updateLeftNav']),\r\n\r\n      // 获取左侧种类导航的数据\r\n      async getCatNav() {\r\n        const {\r\n          data: res\r\n        } = await uni.$http.post('/Menus/')\r\n        console.log(res);\r\n        // this.leftNav = res.kind\r\n\r\n        // 更新全局变量 LeftNav\r\n        this.updateLeftNav(res.kind)\r\n\r\n      },\r\n\r\n      // 获取帖子数据的方法\r\n      async getGoodsList(cb) {\r\n        // 调用接口，将接口中 data 属性重命名为 res。\r\n        // 如果leftNav还未获取到，则应等待leftNav的获取。\r\n        console.log('JSON.stringify(this.leftNav)', JSON.stringify(this.leftNav) == '[] ');\r\n        let that = this;\r\n        if (JSON.stringify(this.leftNav) == '[]') {\r\n          // 每500s执行一次check函数\r\n          this.intv = setInterval(check, 500);\r\n        } else {\r\n          // 直接请求\r\n          const {\r\n            data: res\r\n          } = await uni.$http.post('/PostList/', {\r\n            // 第一次请求，默认请求第一个一级导航的所有帖子数据，因此 kind 默认是1\r\n            type: that.type,\r\n            kind: that.leftNav[0].children[0].value,\r\n            selectID: that.selectID,\r\n            page: that.page,\r\n            pageSize: that.pageSize\r\n          })\r\n\r\n          if (res.code != 200) {\r\n            return uni.$shoMsg('数据加载失败', 1500, 'error')\r\n          }\r\n\r\n          that.total = res.post_list.total\r\n          that.goodsList = res.post_list.list;\r\n          this.page++;\r\n\r\n\r\n          if (typeof(cb) == 'function') {\r\n            cb();\r\n          }\r\n\r\n        }\r\n        // check函数要复用，区别就是是否需要清除定时器，因此传入需要清除定时器的回调函数。\r\n        async function check() {\r\n          if (JSON.stringify(that.leftNav) != '[]') {\r\n            // 如果 leftNav 已经请求到了\r\n            clearInterval(that.intv)\r\n            const {\r\n              data: res\r\n            } = await uni.$http.post('/PostList/', {\r\n              // 第一次请求，默认请求第一个一级导航的所有帖子数据，因此 kind 默认是1\r\n              type: that.type,\r\n              kind: that.leftNav[0].children[0].value,\r\n              selectID: that.selectID,\r\n              page: that.page,\r\n              pageSize: that.pageSize\r\n            })\r\n            if (res.code != 200) {\r\n              return uni.$shoMsg('数据加载失败', 1500, 'error')\r\n            }\r\n\r\n            that.total = res.post_list.total\r\n            that.goodsList = res.post_list.list;\r\n            this.page++;\r\n          }\r\n        }\r\n\r\n        // console.log(res);\r\n      },\r\n\r\n      // 点击左侧导航栏，重新请求右侧数据\r\n      async changeGoodsList() {\r\n        // 点击左侧导航栏后，默认请求第一页数据。\r\n        this.page = 1;\r\n\r\n        // 获取kind\r\n        let secNav = 0\r\n        // 如果 children 没有任何二级导航，则请求 id 为一级导航的 id\r\n        if (this.leftNav[this.firstActive].children.length == 0) {\r\n          secNav = this.leftNav[this.firstActive].value\r\n        } else {\r\n          secNav = this.leftNav[this.firstActive].children[this.secondActive].value\r\n        }\r\n        // 请求参数\r\n        let query = {\r\n          type: this.type,\r\n          kind: secNav,\r\n          selectID: this.selectID,\r\n          page: this.page,\r\n          pageSize: this.pageSize\r\n        }\r\n        // 如果用户按照日期范围筛选，需要增加属性\r\n        if (this.selectID == 3) {\r\n          query['start'] = this.dateRange.before;\r\n          query['end'] = this.dateRange.after;\r\n        }\r\n        const {\r\n          data: res\r\n        } = await uni.$http.post('/PostList/', query)\r\n        if (res.code != 200) {\r\n          return uni.$shoMsg('数据加载失败', 1500, 'error')\r\n        }\r\n        // console.log(res);\r\n        this.total = res.post_list.total\r\n        this.goodsList = res.post_list.list;\r\n        this.page++;\r\n\r\n      },\r\n\r\n      // 搜索框点击函数\r\n      goToSearch() {\r\n        uni.navigateTo({\r\n          url: '/subpkg/search/search?type=1'\r\n        })\r\n      },\r\n      // 点击改变激活项\r\n      firActiveChange(index) {\r\n        this.firstActive = index\r\n        this.secondActive = 0\r\n        this.changeGoodsList()\r\n      },\r\n      secActiveChange(index) {\r\n        this.secondActive = index,\r\n          // 重新请求物品列表\r\n          this.changeGoodsList()\r\n      },\r\n\r\n      // 子组件向父组件传值\r\n      syncSelectId(e) {\r\n        console.log('e', e);\r\n        this.selectID = e.selectID\r\n        // 重新请求物品列表\r\n        if (this.selectID != 3) {\r\n          this.changeGoodsList()\r\n          this.$refs.filterBar.popUpClose();\r\n        } else {\r\n          // 获取当前日期，用于日期选择\r\n          this.nowDate = tools.nowDate();\r\n          this.$refs.filterBar.popUpClose();\r\n          this.$refs.calendar.open();\r\n        }\r\n      },\r\n\r\n      // 日历确定函数\r\n      confirm(e) {\r\n        this.dateRange = e.range;\r\n        this.changeGoodsList();\r\n      },\r\n\r\n\r\n      // scroll-view 上拉触底\r\n      async lowerBottom() {\r\n        // 当 当前页码值*每页显示数据个数 >= 总数据个数，则下一页无数据\r\n        // 正在进行数据请求，也不再请求\r\n        if ((this.page - 1) * this.pageSize >= this.total || this.lowerLoading == true) {\r\n          return 0;\r\n        }\r\n        // 加载更多\r\n        uni.showLoading()\r\n        this.lowerLoading = true;\r\n\r\n        let secNav = this.leftNav[this.firstActive].children[this.secondActive].value\r\n        // 请求参数\r\n        let query = {\r\n          type: this.type,\r\n          kind: secNav,\r\n          selectID: this.selectID,\r\n          page: this.page,\r\n          pageSize: this.pageSize\r\n        }\r\n        // 如果用户按照日期范围筛选，需要增加属性\r\n        if (this.selectID == 3) {\r\n          query['start'] = this.dateRange.before;\r\n          query['end'] = this.dateRange.after;\r\n        }\r\n        const {\r\n          data: res\r\n        } = await uni.$http.post('/PostList/', query)\r\n        if (res.code != 200) {\r\n          return uni.$shoMsg('数据加载失败', 1500, 'error')\r\n        }\r\n        if (res.code != 200) {\r\n          return uni.$shoMsg('数据加载失败', 1500, 'error')\r\n        }\r\n        // console.log(res);\r\n        this.goodsList = [...this.goodsList, ...res.post_list.list];\r\n        this.page++;\r\n        this.lowerLoading = false;\r\n        uni.hideLoading()\r\n      },\r\n    },\r\n\r\n    components: {\r\n      mySearch,\r\n      uniEmpty,\r\n      filterBar\r\n    },\r\n\r\n    // 如果是分享页，则会先跳转到首页并传参，接下来获取这个参数做判断。\r\n    onLoad(options) {\r\n\r\n      // 如果未获取过左侧导航栏的数据，就重新请求左侧导航栏。\r\n\r\n\r\n      if (JSON.stringify(this.leftNav) == '[]') {\r\n\r\n        // 请求左侧导航数据\r\n        this.getCatNav()\r\n      }\r\n\r\n      // 请求首页数据\r\n      this.getGoodsList()\r\n\r\n      // isShared 表示首页是被向后进入的，因此要跳转到信息页\r\n      if (options.isShared == 1) {\r\n        uni.navigateTo({\r\n          url: '/subpkg/goods_detail/goods_detail?detail_type=' + options.detail_type + '&item_id=' + options\r\n            .item_id\r\n        })\r\n      }\r\n      // 获取当前系统的信息\r\n      const sysInfo = uni.getSystemInfoSync()\r\n      // 为 wh 窗口可用高度赋值\r\n      this.wh = sysInfo.windowHeight - 53;\r\n      this.fatherDeviceWidth = sysInfo.windowWidth;\r\n\r\n      // 获取左侧导航栏宽度\r\n      // select中的参数就如css选择器一样选择元素\r\n      let info = uni.createSelectorQuery().in(this).select(\".left\");\r\n      let that = this;\r\n      info.boundingClientRect(function(data) {\r\n        //\tdata - 包含元素的高度等信息\r\n        that.leftNavWidth = data.width\r\n      }).exec(function(res) {\r\n        // 注意：exec方法必须执行，即便什么也不做，否则不会获取到任何数据\r\n      });\r\n    },\r\n    onReady() {\r\n      uni.setNavigationBarColor({\r\n        frontColor: '#ffffff',\r\n        backgroundColor: '#add3e8'\r\n      })\r\n    },\r\n    onShow() {},\r\n    onHide() {\r\n      this.$refs.mySearch.popUpClose()\r\n    },\r\n    // 下拉刷新\r\n    onPullDownRefresh() {\r\n      // 重置左侧导航栏激活项\r\n      this.firstActive = 0;\r\n      this.secondActive = 0;\r\n      // 重置筛选项。\r\n      this.selectID = 1;\r\n      this.$refs.filterBar.active = 0;\r\n      // 重新请求第一页的数据\r\n      this.page = 1;\r\n      // 重新加载数据\r\n      this.getGoodsList(() => {\r\n        console.log('关闭下拉刷新');\r\n        uni.stopPullDownRefresh()\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  // 搜索框吸顶（粘性定位）\r\n  .search-box {\r\n    // 设置定位效果为“吸顶”\r\n    position: sticky;\r\n    // 吸顶的“位置”\r\n    top: 0;\r\n    // 提高层级，防止被轮播图覆盖\r\n    z-index: 1500;\r\n    transition: all 0.5s;\r\n    padding-top: 10px;\r\n  }\r\n\r\n  // 激活效果\r\n  .firstActive {\r\n    background-color: #fff !important;\r\n    font-weight: bold;\r\n    color: #4095e5;\r\n  }\r\n\r\n  .secondActive {\r\n    font-weight: bold;\r\n    color: #000 !important;\r\n  }\r\n\r\n  .even {\r\n    color: #4095e5;\r\n    background-color: #d9eafa;\r\n  }\r\n\r\n  .odd {\r\n    background-color: #f2d6d3;\r\n    color: #de868f;\r\n  }\r\n\r\n  .container {\r\n    width: 740rpx;\r\n    // color: $grey-color;\r\n    margin-top: 40rpx;\r\n\r\n\r\n    .mid-content-container {\r\n      display: flex;\r\n\r\n      .left {\r\n        z-index: 999;\r\n\r\n        .cat-container {\r\n          width: 212rpx;\r\n          background-color: #f7f8fa;\r\n\r\n          .cat-item {\r\n            color: #000;\r\n\r\n            .first-nav-item {\r\n              display: flex;\r\n              font-size: 32rpx !important;\r\n              padding-top: 26rpx;\r\n              padding-bottom: 26rpx;\r\n              padding-left: 14rpx;\r\n              transition: all 0.5s;\r\n\r\n              .iconfont {\r\n                font-size: 40rpx !important;\r\n                margin-right: 14rpx;\r\n              }\r\n            }\r\n\r\n            .second-nav-item {\r\n              font-size: 34rpx;\r\n              text-align: center;\r\n              padding: 30rpx 0rpx;\r\n              transition: all 0.5s;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .right {\r\n\r\n        // padding-top: 20rpx;\r\n        .goods-container {\r\n          // display: none !important;\r\n\r\n          &:first-of-type {\r\n            margin-top: 20rpx;\r\n          }\r\n\r\n          // width: 732rpx;\r\n          height: 252rpx;\r\n          border-radius: 30rpx;\r\n          background-color: rgba(255, 255, 255, 100);\r\n          box-shadow: 0rpx 4rpx 12rpx 0rpx rgba(0, 0, 0, 0.4);\r\n          display: flex;\r\n          flex-direction: column;\r\n          justify-content: center;\r\n          // align-items: center;\r\n          margin-bottom: 40rpx;\r\n          margin-left: 16rpx;\r\n          margin-right: 16rpx;\r\n\r\n          &:nth-of-type(1) {\r\n            // margin-top: 40rpx;\r\n          }\r\n\r\n          // .goods-cate {\r\n          //   padding-left: 34rpx;\r\n          //   margin-bottom: 24rpx;\r\n          //   font-size: 28rpx;\r\n\r\n          //   &::after {\r\n          //     display: block;\r\n          //     content: '';\r\n          //     width: 656rpx;\r\n          //     height: 2rpx;\r\n          //     margin-top: 10rpx;\r\n          //     background-color: #BBBBBB;\r\n          //   }\r\n          // }\r\n\r\n          .goods-info {\r\n            display: flex;\r\n\r\n\r\n            image {\r\n              width: 160rpx;\r\n              height: 160rpx;\r\n              border-radius: 30rpx;\r\n              margin-left: 10rpx;\r\n            }\r\n\r\n            .goods-desc-box {\r\n              display: flex;\r\n              flex-direction: column;\r\n              justify-content: space-around;\r\n              margin-left: 20rpx;\r\n              font-size: 28rpx;\r\n\r\n              .goods-desc {\r\n                font-size: 36rpx;\r\n                color: #000000;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./lost.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.3.13.20220314\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./lost.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}