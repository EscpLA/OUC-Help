(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/me-posts/me-posts"],{147:function(e,t,n){"use strict";(function(e){n(5);o(n(4));var t=o(n(148));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},148:function(e,t,n){"use strict";n.r(t);var o=n(149),r=n(151);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n(153);var s,u=n(48),a=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);a.options.__file="subpkg/me-posts/me-posts.vue",t["default"]=a.exports},149:function(e,t,n){"use strict";n.r(t);var o=n(150);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},150:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return o}));try{o={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,215))},uniPopupDialog:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(n.bind(null,254))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.posts,(function(t,n){var o=e.__get_orig(t),r=e.postTime(n),i=e.itemTime(n);return{$orig:o,m0:r,m1:i}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},i=!1,s=[];r._withStripped=!0},151:function(e,t,n){"use strict";n.r(t);var o=n(152),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},152:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(51)),r=n(45),i=s(n(63));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return p(e)||l(e)||c(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function p(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t,n,o,r,i,s){try{var u=e[i](s),a=u.value}catch(c){return void n(c)}u.done?t(a):Promise.resolve(a).then(o,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function s(e){f(i,o,r,s,u,"next",e)}function u(e){f(i,o,r,s,u,"throw",e)}s(void 0)}))}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={data:function(){return{posts:[],myDeletePost:{deletePostId:-1,deletePostIndex:-1},page:1,pageSize:6,total:0,bottomLoading:!1}},computed:b(b({},(0,r.mapState)("m_user",["token"])),{},{postTime:function(){var e=this;return function(t){return i.default.utcToBeijing(e.posts[t].post_time)}},itemTime:function(){var e=this;return function(t){return console.log(i.default.utcToBeijing(e.posts[t].post_time)),i.default.itemTime(e.posts[t].time)}}}),methods:{getPostList:function(){var t=this;return m(o.default.mark((function n(){var r,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t.token),n.next=3,e.$http.post("/MyPostList/",{openid:t.token,page:t.page,pageSize:t.pageSize});case 3:if(r=n.sent,i=r.data,200==i.code){n.next=7;break}return n.abrupt("return",e.$showMsg("数据加载失败",1500,"error"));case 7:console.log(i),t.posts=i.myPost.list,t.total=i.myPost.total,t.page++,console.log("this.posts",t.posts);case 12:case"end":return n.stop()}}),n)})))()},itemClickHandler:function(t){e.navigateTo({url:"/subpkg/goods_detail/goods_detail?detail_type="+this.posts[t].type_id+"&item_id="+this.posts[t].id})},deleteHandler:function(e,t){this.myDeletePost.deletePostId=e,this.myDeletePost.deletePostIndex=t,this.$refs.popup.open()},deletePost:function(){var t=this;return m(o.default.mark((function n(){var r,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showLoading({title:"请稍候......"}),n.next=3,e.$http.post("/deletePost/",{id:t.myDeletePost.deletePostId});case 3:r=n.sent,i=r.data,console.log(i),200==i.code&&(console.log("删除成功"),t.posts.splice(t.myDeletePost.deletePostIndex,1));case 7:case"end":return n.stop()}}),n)})))()},close:function(){this.$refs.popup.close()},confirm:function(e){this.$refs.popup.close(),this.deletePost()}},onLoad:function(){this.getPostList()},onReachBottom:function(){var t=this;return m(o.default.mark((function n(){var r,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!((t.page-1)*t.pageSize>=t.total||1==t.bottomLoading)){n.next=2;break}return n.abrupt("return",0);case 2:return e.showLoading(),t.bottomLoading=!0,n.next=6,e.$http.post("/MyPostList/",{openid:t.token,page:t.page,pageSize:t.pageSize});case 6:if(r=n.sent,i=r.data,200==i.code){n.next=10;break}return n.abrupt("return",e.$showMsg("数据加载失败",1500,"error"));case 10:console.log(i),t.posts=[].concat(u(t.posts),u(i.myPost.list)),t.page++,t.bottomLoading=!1,e.hideLoading();case 15:case"end":return n.stop()}}),n)})))()}};t.default=v}).call(this,n(1)["default"])},153:function(e,t,n){"use strict";n.r(t);var o=n(154),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},154:function(e,t,n){}},[[147,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/subpkg/me-posts/me-posts.js.map